{% extends 'base.html' %}

{% block title %}Penayangan · Tiketa{% endblock %}

{% block extra_head %}
<style>
    .movies-hero {
        margin-bottom: 48px;
        display: grid;
        gap: 18px;
        justify-items: center;
        text-align: center;
    }

    .hero-tagline {
        padding: 10px 18px;
        border-radius: 999px;
        background: rgba(148, 163, 184, 0.16);
        border: 1px solid rgba(148, 163, 184, 0.28);
        font-size: 0.85rem;
        letter-spacing: 0.12em;
        text-transform: uppercase;
        color: rgba(226, 232, 240, 0.78);
    }

    .movies-hero h2 {
        margin: 0;
        font-size: clamp(2.1rem, 4vw, 3rem);
        font-weight: 600;
        letter-spacing: 0.02em;
    }

    .hero-description {
        margin: 0;
        max-width: 720px;
        font-size: 1.05rem;
        font-weight: 400;
        color: rgba(226, 232, 240, 0.78);
        line-height: 1.8;
    }

    .hero-actions {
        display: flex;
        align-items: center;
        gap: 18px;
    }

    .hero-cta {
        padding: 12px 28px;
        font-size: 0.95rem;
        box-shadow: 0 16px 36px rgba(124, 58, 237, 0.35);
    }

    .hero-note {
        font-size: 0.95rem;
        font-weight: 500;
        color: rgba(226, 232, 240, 0.58);
        letter-spacing: 0.04em;
    }

    .movies-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
        gap: 28px;
        align-items: stretch;
    }

    .movie-card {
        position: relative;
        display: flex;
        flex-direction: column;
        min-height: 100%;
        height: 100%;
        overflow: hidden;
        z-index: 0;
        transition: transform 0.35s ease;
    }

    .movie-card::after {
        content: "";
        position: absolute;
        inset: 0;
        pointer-events: none;
        background: linear-gradient(180deg, rgba(15, 23, 42, 0) 0%, rgba(15, 23, 42, 0.4) 65%, rgba(15, 23, 42, 0.8) 100%);
        opacity: 0;
        transition: opacity 0.35s ease;
        z-index: 2;
    }

    .movie-card:hover::after {
        opacity: 0.6;
    }

    .movie-body {
        position: relative;
        display: flex;
        flex-direction: column;
        gap: 18px;
        flex: 1 1 auto;
        background: linear-gradient(180deg, rgba(15, 23, 42, 0.6) 0%, rgba(15, 23, 42, 0.95) 100%);
    }

    .movie-details {
        display: flex;
        flex-direction: column;
        gap: 14px;
        flex: 1 1 auto;
    }

    .movie-title {
        font-size: 1.35rem;
        font-weight: 600;
    }

    .movie-meta {
        display: flex;
        align-items: center;
        flex-wrap: wrap;
        gap: 16px;
    }

    .studio-chip {
        width: 96px;
        height: 96px;
        border-radius: 50%;
        background: var(--accent-soft);
        border: 1px solid rgba(139, 92, 246, 0.35);
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        text-align: center;
        padding: 12px 10px;
        gap: 6px;
        color: var(--text);
        line-height: 1.1;
    }

    .studio-chip__label {
        font-size: 0.65rem;
        letter-spacing: 0.12em;
        text-transform: uppercase;
        opacity: 0.8;
    }

    .studio-chip__number {
        font-size: 1.6rem;
        font-weight: 600;
        line-height: 1;
    }

    .studio-chip__release {
        font-size: 0.7rem;
        color: rgba(226, 232, 240, 0.78);
    }

    .meta-stack {
        display: flex;
        flex-direction: column;
        gap: 6px;
        color: rgba(226, 232, 240, 0.82);
        font-size: 0.92rem;
    }

    .meta-stack span {
        display: block;
    }

    .movie-description {
        color: var(--text-secondary);
        line-height: 1.6;
        margin: 0;
    }

    .genre-tags {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
    }

    .empty-state {
        text-align: center;
        padding: 48px 40px;
        color: var(--text-secondary);
    }

    .movie-poster {
        width: 100%;
        aspect-ratio: 2 / 3;
        object-fit: cover;
        transition: transform 0.3s ease;
        position: relative;
        z-index: 1;
    }

    .movie-card:hover .movie-poster {
        transform: scale(1.04);
    }

    .movie-cta {
        width: fit-content;
        margin-top: auto;
        position: relative;
        z-index: 1;
        transition: transform 0.3s ease, box-shadow 0.3s ease, filter 0.3s ease;
    }

    .movie-card:hover .movie-cta {
        filter: brightness(0.8);
        box-shadow: none;
    }

    .movie-card:hover .movie-cta:hover {
        position: relative;
        z-index: 5;
        filter: brightness(1.2);
        transform: translateY(-3px);
        box-shadow: 0 24px 54px rgba(124, 58, 237, 0.45);
    }

    @media (max-width: 600px) {
        .hero-actions {
            flex-direction: column;
        }
    }
</style>
{% endblock %}

{% block content %}
<section class="movies-hero">
    <div class="hero-tagline">The Time Gallery.   Bekasi • FAST ADMISSION</div>
    <h2>Now Showing, Forever</h2>
    <p class="hero-description">Di sini, waktu tidak berjalan maju, ia meng abadi. Setiap studio adalah sebuah kuil persembahan untuk satu mahakarya cinema. Dibuka sejak hari pertama filmnya terlahir ke dunia, pintunya tak pernah tertutup, menjaga gema cerita dan bisikan karakter selamanya.</p>
    <div class="hero-actions">
        <a href="{{ url_for('movies.index') }}" class="btn btn-primary hero-cta">Penayangan</a>
    </div>
</section>

<div class="movies-grid">
    {% for movie in movies %}
        <article class="card movie-card">
            {% if movie.poster_path %}
                <img src="{{ movie.poster_path }}" alt="Poster of {{ movie.title }}" class="movie-poster">
            {% endif %}
            <div class="card-padding movie-body">
                <div class="movie-details">
                    <div class="movie-title">{{ movie.title }}</div>
                    {% set daily_slots = 6 if movie.studio_number % 2 == 0 else 5 %}
                    <div class="movie-meta">
                        <div class="studio-chip">
                            <span class="studio-chip__label">Studio</span>
                            <span class="studio-chip__number">{{ '%02d'|format(movie.studio_number) }}</span>
                            {% if movie.release_date %}
                                <span class="studio-chip__release">{{ movie.release_date.strftime('%b %d, %Y') }}</span>
                            {% endif %}
                        </div>
                        <div class="meta-stack">
                            <span>{{ daily_slots }} shows per day</span>
                            {% if movie.genres %}
                                <span>{{ movie.genres|length }} Genres</span>
                            {% endif %}
                        </div>
                    </div>
                    <p class="movie-description">{{ movie.description }}</p>
                </div>
                {% if movie.genres %}
                    <div class="genre-tags">
                        {% for genre in movie.genres %}
                            <span class="tag">{{ genre.name }}</span>
                        {% endfor %}
                    </div>
                {% endif %}
                <a href="{{ url_for('movies.movie_detail', movie_id=movie.id) }}" class="btn btn-primary movie-cta">Lihat Jadwal</a>
            </div>
        </article>
    {% endfor %}

    {% if not movies %}
        <article class="card empty-state">
            <h3 style="margin-top: 0;">No movies available</h3>
            <p>Check back later for fresh blockbusters and indie gems.</p>
        </article>
    {% endif %}
</div>
{% endblock %}